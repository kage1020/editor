/* =====================
   UNDERLINE HIGHLIGHT (Fluorescent marker style)
   ===================== */

.tiptap.ProseMirror mark.underline-highlight {
  background: linear-gradient(to top, var(--accent) 0%, var(--accent) 50%, transparent 50%);
  border-radius: 0;
  padding: 1px;
  padding-bottom: 3px;
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
  position: relative;
  color: inherit;
}

/* Different highlight colors for multicolor mode */
.tiptap.ProseMirror mark.underline-highlight[data-color="#ffeb3b"] {
  background: linear-gradient(to top, #ffeb3b 0%, rgba(255, 235, 59, 0.5) 50%, transparent 50%);
}

.tiptap.ProseMirror mark.underline-highlight[data-color="#4caf50"] {
  background: linear-gradient(to top, #4caf50 0%, rgba(76, 175, 80, 0.5) 50%, transparent 50%);
}

.tiptap.ProseMirror mark.underline-highlight[data-color="#2196f3"] {
  background: linear-gradient(to top, #2196f3 0%, rgba(33, 150, 243, 0.5) 50%, transparent 50%);
}

.tiptap.ProseMirror mark.underline-highlight[data-color="#ff9800"] {
  background: linear-gradient(to top, #ff9800 0%, rgba(255, 152, 0, 0.5) 50%, transparent 50%);
}

.tiptap.ProseMirror mark.underline-highlight[data-color="#e91e63"] {
  background: linear-gradient(to top, #e91e63 0%, rgba(233, 30, 99, 0.5) 50%, transparent 50%);
}

.tiptap.ProseMirror mark.underline-highlight[data-color="#9c27b0"] {
  background: linear-gradient(to top, #9c27b0 0%, rgba(156, 39, 176, 0.5) 50%, transparent 50%);
}

/* Darker theme adjustments */
.dark .tiptap.ProseMirror mark.underline-highlight {
  background: linear-gradient(to top, var(--accent) 0%, rgba(var(--accent-rgb, 255, 235, 59), 0.4) 50%, transparent 50%);
  color: inherit;
}

/* Animation for selection highlight */
.tiptap.ProseMirror mark.underline-highlight.ProseMirror-selectednode {
  animation: underline-highlight-pulse 1s ease-in-out;
}

@keyframes underline-highlight-pulse {
  0% {
    transform: scaleY(1);
  }
  50% {
    transform: scaleY(1.1);
  }
  100% {
    transform: scaleY(1);
  }
}

/* Ensure proper line height to accommodate thicker underline */
.tiptap.ProseMirror p:has(mark.underline-highlight),
.tiptap.ProseMirror h1:has(mark.underline-highlight),
.tiptap.ProseMirror h2:has(mark.underline-highlight),
.tiptap.ProseMirror h3:has(mark.underline-highlight),
.tiptap.ProseMirror h4:has(mark.underline-highlight),
.tiptap.ProseMirror h5:has(mark.underline-highlight),
.tiptap.ProseMirror h6:has(mark.underline-highlight) {
  padding-bottom: 4px;
}
